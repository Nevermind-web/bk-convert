<!DOCTYPE html>
<html lang="cs">
<head>
<meta charset="UTF-8">
<title>BK Convert</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
:root{
  --bg:#050816;
  --card:#0f172a;
  --text:#e5e7eb;
  --muted:#94a3b8;
  --accent:#38bdf8;
  --accent2:#a78bfa;
}

*{box-sizing:border-box}

body{
  margin:0;
  font-family:Inter,system-ui,sans-serif;
  background:
    radial-gradient(800px at 10% 10%,rgba(56,189,248,.18),transparent),
    radial-gradient(800px at 90% 20%,rgba(167,139,250,.18),transparent),
    linear-gradient(180deg,#050816,#0b1220);
  color:var(--text);
  min-height:100vh;
}

.wrapper{
  min-height:100vh;
  display:flex;
  justify-content:center;
  align-items:center;
  padding:40px;
}

.app{
  width:100%;
  max-width:900px;
  background:rgba(15,23,42,.9);
  backdrop-filter:blur(18px);
  border-radius:28px;
  padding:40px;
  box-shadow:0 40px 100px rgba(0,0,0,.6);
}

header{
  margin-bottom:30px;
}

h1{
  margin:0;
  font-size:34px;
}

.subtitle{
  color:var(--muted);
  font-size:14px;
}

.drop{
  margin:30px 0;
  padding:70px;
  border-radius:24px;
  border:2px dashed rgba(255,255,255,.15);
  text-align:center;
  cursor:pointer;
  transition:.25s;
}

.drop:hover{
  border-color:var(--accent);
  background:rgba(56,189,248,.05);
}

.drop strong{
  font-size:20px;
}

.drop span{
  display:block;
  margin-top:12px;
  color:var(--muted);
}

.controls{
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:20px;
  margin-top:20px;
}

select,button{
  padding:16px;
  border-radius:14px;
  border:none;
  font-size:15px;
}

select{
  background:#020617;
  color:var(--text);
}

button{
  background:linear-gradient(135deg,var(--accent),var(--accent2));
  color:#020617;
  font-weight:800;
  cursor:pointer;
}

button:hover{
  filter:brightness(1.1);
}

footer{
  margin-top:30px;
  display:flex;
  justify-content:space-between;
  font-size:13px;
  color:var(--muted);
}

.logo{
  position:fixed;
  right:24px;
  bottom:24px;
  font-weight:900;
  letter-spacing:3px;
  opacity:.6;
}
</style>
</head>

<body>
<div class="wrapper">
  <div class="app">

    <header>
      <h1>BK Convert</h1>
      <div class="subtitle">Jednoduchý online převod obrázků</div>
    </header>

    <div class="drop" id="drop">
      <strong>Přetáhni obrázky nebo klikni</strong>
      <span id="info">PNG • JPG • WEBP</span>
    </div>

    <input type="file" id="fileInput" multiple accept="image/*" hidden>

    <div class="controls">
      <select id="format">
        <option value="image/jpeg">JPG</option>
        <option value="image/png">PNG</option>
        <option value="image/webp">WEBP</option>
      </select>
      <button id="convertBtn">Převést</button>
    </div>

    <footer>
      <div>Funguje na GitHub Pages</div>
      <div>Powered by <b>Nevermind web</b></div>
    </footer>

  </div>
</div>

<div class="logo">BK</div>

<script>
document.addEventListener("DOMContentLoaded", () => {

  const drop = document.getElementById("drop");
  const fileInput = document.getElementById("fileInput");
  const convertBtn = document.getElementById("convertBtn");
  const info = document.getElementById("info");
  const formatSelect = document.getElementById("format");

  let files = [];

  // Zabránění výchozímu chování
  ["dragenter","dragover","dragleave","drop"].forEach(event => {
    document.addEventListener(event, e => {
      e.preventDefault();
      e.stopPropagation();
    });
  });

  drop.addEventListener("click", () => fileInput.click());

  drop.addEventListener("drop", (e) => {
    files = [...e.dataTransfer.files];
    updateInfo();
  });

  fileInput.addEventListener("change", (e) => {
    files = [...e.target.files];
    updateInfo();
  });

  function updateInfo(){
    if (!files.length) return;
    info.innerHTML = files.map(f => f.name).join("<br>");
  }

  convertBtn.addEventListener("click", () => {
    if (!files.length) return;

    const type = formatSelect.value;

    files.forEach(file => {
      if (!file.type.startsWith("image/")) return;

      const img = new Image();
      img.src = URL.createObjectURL(file);

      img.onload = () => {
        const canvas = document.createElement("canvas");
        canvas.width = img.width;
        canvas.height = img.height;

        const ctx = canvas.getContext("2d");
        ctx.fillStyle = "#fff";
        ctx.fillRect(0,0,canvas.width,canvas.height);
        ctx.drawImage(img,0,0);

        const url = canvas.toDataURL(type,0.95);

        const a = document.createElement("a");
        a.href = url;
        a.download = file.name.replace(/\.[^/.]+$/,"") + "." + type.split("/")[1];
        a.click();
      };
    });
  });

});
</script>

</body>
</html>
